{% extends 'base.html' %}

{% block content %}
	
	{% import 'post_block.html' as temp %}
	{% import 'assignment_block.html' as block %}
	<div class="panel-group all" id="accordion">
		{{ temp.assignment(assign) }}
	</div>
	<h3 class="all">
		<a href="{{ url_for('assignResults',assign_id=assign.id, sort_id=0) }}">Submissions</a>
	</h3>

	{% if user.admin %}
		<a class="all" href="{{ url_for('editAssign',assign_id=assign.id) }}">edit</a>

		{% if assign.int_type == 1 or assign.int_type == 2 %}
		
			<h3 class="all">Tests:</h3>
			<ul>
				{% for t in tests %}
				<li>
					<h4><a href="{{ url_for('testView',test_id=t.id) }}">{{t.name}}</a></h4>
				</li>
				{% endfor %}
			</ul>
			<h3 class="all">Add Test File:</h3>
			<form method="POST" action="{{ url_for('addTest',assign_id=assign.id) }}">
				<p>
				Test Name:
				<input type="text" name="title">
				</p>
				<div class="code">
					public class {{assign.name}}{<br>
					&emsp;public static void main(String[] args){<br>
					&emsp;<textarea class="code-textbox" name="test_code" rows="15" cols="55"></textarea><br>
					&emsp;}<br>
					}
				</div>
				<br>
				<input class="btn btn-info" type="submit" value="add test">
			</form>
		
		{% endif %}

		<hr class="all">

		<div class="text-center all">
			<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#myModal">
			  	Delete Assignment
			</button>
		</div>

		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">Confirm</h4>
		      </div>
		      <div class="modal-body">
		        Are you sure you want to delete <strong>{{assign.name}}</strong>?  All data including student posts, results, and tests associated with this assignment will be permanently deleted.
		      </div>
		      <div class="modal-footer">
		      	<form method="POST" action="{{ url_for('deleteAssign', assign_id=assign.id) }}">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
			        <button type="submit" formmethod="POST" class="btn btn-danger">Delete</button>
			    </form>
		      </div>
		    </div>
		  </div>
		</div>
		
		<!-- <form class="all text-center" action="{{ url_for('deleteAssign', assign_id=assign.id) }}">
			<input class="btn btn-danger" type="submit" value="delete assignment">
		</form> -->

	{% else %}
		{% if assign.int_type == 0 %}
			{{ block.main_method(assign) }}
		{% elif assign.int_type == 1 %}
			{{ block.static_method(assign) }}
		{% elif assign.int_type == 2 %}
			{{ block.public_class(assign) }}
		{% endif %}
		
	{% endif %}
	

{% endblock %}










